{% extends 'base.html.twig' %}

{% block title %}
	Stock index
{% endblock %}
{% block maintitle %}

	Manage Requests
{% endblock %}
{% block breadcrumb %}
	<li class="breadcrumb-item active">Stock
	</li>
	<li class="breadcrumb-item active">stock</li>
{% endblock %}
{% block body %}
	<div class="row">
		<div class="card col-md">

			<div class="card-body">
				<div class="row">
					<div class="col-md-12">
						<div class="card card ">
							<div class="card-header">
								{% if  carts %}

									<div class="container conatainer-fluid p-2 col-12" style="background-color:#17a2b8;">
										<table class="table table-condensed table-bordered" style="background:#fff;width:60%">
											<thead>
												<th>Product</th>
												<th>Quantity</th>
												<th>Action</th>
											</thead>
											<tbody>
												{% for items in carts %}
													<tr>
														<td>{{items.product_name}}</td>
														<td>{{items.quantity}}</td>
														<td>
															<a href="{{ path('product_show', {'id': items.id}) }}" class="btn btn-sm">Edit</a>
														</td>
													</tr>

												{% endfor %}
											</tbody>
										</table>

										<form action="{{path('requestitems')}}" method="POST">

											<textarea class=" p-2" name="reason" placeholder="write your reason here..." required style="width: 60%;"></textarea>
											<br>
											<input type="submit" name="req" class="btn btn-primary" value="Request"/>
											<a href="{{ path('reset_request')}}" class="btn btn-danger">Reset</a>
										</form>
									</div>
									<br>
								{% endif %}
								<div class="card-tools">

									<form class="form-inline ml-3">
										<div class="input-group ">
											<input class="form-control" autocomplete="off" name="search" type="search" placeholder="Search" aria-label="Search">
											<div class="input-group-append">
												<button class=" input-group-text btn btn-navbar " type="submit">
													<i class="fas fa-search"></i>
												</button>
											</div>
										</div>
									</form>
								</div>
							</div>
							<div class="card-body">
								<table class="table table-hover">
									<thead class="thead-light">
										<tr>
											<th>#</th>
											<th>Product</th>
											<th>Available</th>
											<th>Requested</th>
											<th>UOM</th>
											<th>actions</th>
										</tr>
									</thead>
									<tbody>
										{% set i = 1 %}
										{% for stock in stocks %}
											<tr>
												<td>
													{{ i }}
													{% set i = i+1 %}
												</td>
												<td>{{ stock.productName }}</td>
												<td>{{ stock.avail.stock }}</td>
												<td>{{ stock.avail.requested }}</td>
												<td>{{ stock.unit }}</td>
												<td>
													<a href="{{ path('product_show', {'id': stock.productId}) }}" class="btn btn-info btn-sm																																					{% if stock.avail.requested >= stock.avail.stock %} disabled {% endif %}" title="Show">
														<i class="">More</i>
													</a>


												</td>

											</tr>
										{% else %}
											<tr>
												<td colspan="5">no records found</td>
											</tr>
										{% endfor %}
									</tbody>
								</table>
								<div class="float-right">{{ knp_pagination_render(stocks) }}</div>


							</div>
						</div>
					</div>
					<!-- /.card-body -->
				</div>
			</div>

		</div>
		<!-- /.card-body -->
	</div>

{% endblock %}
